<!DOCTYPE html>
<html>

<head>
    <base href="/">
    <meta charset="utf-8">
    <meta name="darkreader-lock">
    <meta name="robots" content="noindex, nofollow" />
    <meta name="viewport" content="width=device-width, viewport-fit=cover, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <title>SillyTavern Multiplayer</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.0/purify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/showdown@latest/dist/showdown.min.js"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="webfonts/NotoSans/stylesheet.css" rel="stylesheet">
</head>

<body class="Hcentered">
    <div id="bodywrap" class="flexbox noWrap noGap">
        <div id="controlPanel" class="margin5 flexbox flexFlowCol">
            <div class="hostControls flexbox flexFlowCol">
                <h4>AI Controls</h4>
                <div class="flexbox Vcentered">
                    <span class="flex1">API</span>
                    <div id="toggleMode" class="tabbyMode fontSize1p5em greyscale bgBrightUp textshadow transition250" title="Toggle Mode">üêà</div>
                </div>

                <div class="flexbox Vcentered">
                    <span class="flex1">Context</span>
                    <div class="custom-select">
                        <select id="maxContext">
                            <option value="1024">1024</option>
                            <option value="2048">2048</option>
                            <option value="4096">4096</option>
                            <option value="8196">8192</option>
                        </select>
                    </div>
                </div>
                <div class="flexbox Vcentered">
                    <span class="flex1">Response</span>
                    <div class="custom-select">
                        <select id="responseLength">
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="200">200</option>
                            <option value="300">300</option>
                            <option value="400">400</option>
                        </select>
                    </div>
                </div>
                <div class="flexbox Vcentered">
                    <span class="flex1">Samplers</span>
                    <div class="custom-select">
                        <select id="samplerPreset"></select>
                    </div>
                </div>
                <div class="flexbox Vcentered">
                    <span class="flex1">Instruct</span>
                    <div class="custom-select">
                        <select id="instructStyle">
                            <option value="none">None</option>
                            <option value="chatML">ChatML</option>
                            <option value="Alpaca">Alpaca</option>
                        </select>
                    </div>
                </div>
                <div class="flexbox"><span class="flex1">Char</span>
                    <div class="custom-select">
                        <select id="characters" class="flex1"></select>
                    </div>
                </div>
                <div class="flexbox">
                    <label for="AIAutoResponse" class="Vcentered checkbox_label">
                        <span class="flex1">AutoResponse</span>
                        <input type="checkbox" class="Vcentered" id="AIAutoResponse">
                    </label>
                </div>
                <div class="flexbox Hcentered justifySpaceBetween margin5">
                    <button id="clearAIChat" class="fontSize1p5em greyscale bgBrightUp textshadow">üóëÔ∏è</button>
                    <button id="triggerAIResponse" class="fontSize1p5em greyscale bgBrightUp textshadow">ü§ñüí¨</button>
                    <button id="deleteLastMessageButton" class="fontSize1p5em greyscale bgBrightUp textshadow">‚úÇÔ∏è</button>
                </div>

                <div class="flexbox flexFlowCol">
                    <span class="flex1">Final Instruction (D1 JB)</span>
                    <textarea class="Vcentered brightUp" rows=6 id="finalInstruction" placeholder="Put your Depth 1 prompt instruction here"></textarea>
                </div>
                <hr>
                <h4>UserChat Controls</h4>
                <div class="flexbox Hcentered margin5">
                    <button id="clearUserChat" class="fontSize1p5em greyscale bgBrightUp textshadow">üóëÔ∏è</button>
                </div>
            </div>
        </div>
        <div id="chatWrap" class="flexbox flex1 noGap">
            <div id="LLMChatWrapper" class="flexbox flexFlowCol flex1">
                <div class="padding5 Hcentered Vcentered flexbox">
                    <!-- A clickable icon that toggles between tabby and horde mode, swaps the API parameters, and updates the UI to reflect the change. -->
                    <!-- Reveals mode on hover -->
                    AI Chat <input type="text" id="AIUsernameInput" class="brightUp" placeholder="Username">
                </div>
                <div id="AIchat" data-chat-id="AIChat"></div>
                <div id="AIInputBlock" class="flexbox noWrap marginLeft5 marginRight5">
                    <textarea id="AIMessageInput" class="brightUp" placeholder="Type a message"></textarea>
                    <div class="flexbox">
                        <button id="AISendButton" class="greyscale fontSize1p5em textshadow">‚úèÔ∏è</button>
                        <button id="AIRetry" class="greyscale fontSize1p5em textshadow">üîÑ</button>
                    </div>
                </div>
            </div>
            <div id="universalControls">
                <button id="reconnectButton" class="textshadow greyscale fontSize1p5em brightUp">‚ñ∂Ô∏è</button>
                <button id="disconnectButton" class="textshadow greyscale fontSize1p5em brightUp">‚è∏</button>
            </div>
            <div id="OOCChatWrapper" class="flexbox flexFlowCol flex1">
                <div class="padding5 Hcentered Vcentered flexbox">
                    User Chat <input type="text" id="usernameInput" class="brightUp" placeholder="Username">
                    <button id="clearLocalStorage" class="textshadow greyscale brightUp flipBoth">‚úèÔ∏è</button>
                    <div id="userRole"></div>
                </div>
                <div id="userChatAndUserList" class="flexbox">
                    <div id="chat" data-chat-id="UserChat"></div>
                    <div id="userList">
                        <ul></ul>
                    </div>
                </div>
                <div id="inputBlock" class="flexbox noWrap marginLeft5 marginRight5">
                    <textarea id="messageInput" class="brightUp" placeholder="Type a message"></textarea>
                    <div class="flexbox">
                        <button id="sendButton" class="greyscale fontSize1p5em textshadow">‚úèÔ∏è</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- <div id="footer" class="flexbox Hcentered Vcentered"></div> -->
    </div>
</body>

</html>